#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

last_commit_msg=$(git show -s --format=%s)

vsix=bizzi-i18n-vscode-extension.vsix
vsce package --out $vsix
git add $vsix
git commit -m "bundled: $last_commit_msg"

last_bundled_id_from_head=$(git rev-list --branches --not --remotes=origin --count)

git reset --soft HEAD~${last_bundled_id_from_head}
git commit -m "bundled: $last_commit_msg"